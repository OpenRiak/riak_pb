%% -*- mode: erlang -*-
{erl_opts, [
    debug_info,
    warnings_as_errors,
    {platform_define, "^[0-9]+", namespaced_types},
    {i, "./_build/default/plugins/gpb/include"}
]}.

{xref_checks, [
    undefined_function_calls,
    undefined_functions,
    deprecated_function_calls,
    deprecated_functions
]}.

{eunit_opts, [verbose]}.

{plugins, [rebar3_gpb_plugin,
           {riak_pb_msgcodegen, {git, "git://github.com/tsloughter/riak_pb_msgcodegen",
                                      {branch, "master"}}},
           {eqc_rebar, {git, "https://github.com/Quviq/eqc-rebar", {branch, "master"}}}
          ]}.

{deps, [
    {protobuffs, ".*", {git, "https://github.com/basho/erlang_protobuffs.git", {branch, "develop-3.0"}}}
]}.

{gpb_opts, [{module_name_suffix, "_pb"},
            {msg_name_to_lower, true},
            {defaults_for_omitted_optionals, true},
            {i, "src"}]}.

{provider_hooks, [
    {pre, [{compile, {protobuf, compile}},
           {compile, riak_pb_msgcodegen}]}
]}.

{edoc_opts, [{preprocess, true}]}.

